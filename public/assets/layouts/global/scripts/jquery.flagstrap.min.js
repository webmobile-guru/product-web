/*
 *  FlagStrap - v1.0
 *  A lightwieght jQuery plugin for creating Bootstrap 3 compatible country select boxes with flags.
 *  http://www.blazeworx.com/flagstrap
 *
 *  Made by Alex Carter
 *  Under MIT License
 */
!function(a){var b={buttonSize:"btn-md",buttonType:"btn-default",labelMargin:"10px",scrollable:!0,scrollableHeight:"250px",placeholder:{value:"",text:"Please select country"}},c={EN:"English",JA:"Japanesse",PT:"Portugues",ES:"Spanish"};a.flagStrap=function(d,e){function f(a){var b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split("");a||(a=Math.floor(Math.random()*b.length));for(var c="",d=0;a>d;d++)c+=b[Math.floor(Math.random()*b.length)];return c}var g=this,h=f(8);g.countries={},g.selected={value:null,text:null},g.settings={inputName:"country-"+h};var i=a(d),j="flagstrap-"+h,k="#"+j;g.init=function(){g.countries=c,g.countries=c,g.settings=a.extend({},b,e,i.data()),void 0!==g.settings.countries&&(g.countries=g.settings.countries),void 0!==g.settings.inputId&&(j=g.settings.inputId,k="#"+j),i.addClass("flagstrap").append(l).append(m).append(n),void 0!==g.settings.onSelect&&g.settings.onSelect instanceof Function&&a(k).change(function(){var b=this;e.onSelect(a(b).val(),b)}),a(k).hide()};var l=function(){var b=a("<select/>").attr("id",j).attr("name",g.settings.inputName);return a.each(g.countries,function(c,d){var e={value:c};void 0!==g.settings.selectedCountry&&g.settings.selectedCountry===c&&(e={value:c,selected:"selected"},g.selected={value:c,text:d}),b.append(a("<option>",e).text(d))}),g.settings.placeholder!==!1&&b.prepend(a("<option>",{value:g.settings.placeholder.value,text:g.settings.placeholder.text})),b},m=function(){var b=a(k).find("option").first().text(),c=a(k).find("option").first().val();if(b=g.selected.text||b,c=g.selected.value||c,c!==g.settings.placeholder.value)var d=a("<i/>").addClass("flagstrap-icon flagstrap-"+c.toLowerCase()).css("margin-right",g.settings.labelMargin);else var d=a("<i/>").addClass("flagstrap-icon flagstrap-placeholder");var e=a("<span/>").addClass("flagstrap-selected-"+h).html(d).append(b),f=a("<button/>").attr("type","button").attr("data-toggle","dropdown").attr("id","flagstrap-drop-down-"+h).addClass("btn "+g.settings.buttonType+" "+g.settings.buttonSize+" dropdown-toggle").html(e);return a("<span/>").addClass("caret").css("margin-left",g.settings.labelMargin).insertAfter(e),f},n=function(){var b=a("<ul/>").attr("id","flagstrap-drop-down-"+h+"-list").attr("aria-labelled-by","flagstrap-drop-down-"+h).addClass("dropdown-menu");return g.settings.scrollable&&b.css("height","auto").css("max-height",g.settings.scrollableHeight).css("overflow-x","hidden"),a(k).find("option").each(function(){var c=a(this).text(),d=a(this).val();if(d!==g.settings.placeholder.value)var e=a("<i/>").addClass("flagstrap-icon flagstrap-"+d.toLowerCase()).css("margin-right",g.settings.labelMargin);else var e=null;var f=a("<a/>").attr("data-val",a(this).val()).html(e).append(c).on("click",function(b){a(k).find("option").removeAttr("selected"),a(k).find('option[value="'+a(this).data("val")+'"]').attr("selected","selected"),a(k).trigger("change"),a(".flagstrap-selected-"+h).html(a(this).html()),b.preventDefault()}),i=a("<li/>").prepend(f);b.append(i)}),b};g.init()},a.fn.flagStrap=function(b){return this.each(function(c){void 0===a(this).data("flagStrap")&&a(this).data("flagStrap",new a.flagStrap(this,b,c))})}}(jQuery);